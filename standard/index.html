

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Standard &mdash; pyramid_oereb  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'',
              LANGUAGE:'en',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Sources" href="sources.html" />
    <link rel="prev" title="Changes/Hints for migration" href="../changes.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> pyramid_oereb
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">Changes/Hints for migration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Standard</a><ul>
<li class="toctree-l2"><a class="reference internal" href="sources.html">Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="models/index.html">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="#functions-for-creating-standard-environment">Functions for creating standard environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#functions-used-as-configurable-hooks">Functions used as configurable hooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contrib/index.html">Contribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/index.html">Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pyramid_oereb</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Standard</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="standard">
<h1>Standard<a class="headerlink" href="#standard" title="Permalink to this headline">¶</a></h1>
<p>The standard package is the part where all the database configuration is stored. It also provides really
useful functions to integrate data, as well as creation of a YAML-configuration fitting this standard
structure. In addition you will find here the hook methods which are used in several places in the
configuration and an example usage of the pyconizer package to provide legend entry icons for a dedicated
layer.</p>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="functions-for-creating-standard-environment">
<h2>Functions for creating standard environment<a class="headerlink" href="#functions-for-creating-standard-environment" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-pyramid_oereb.contrib.data_sources.create_tables"><span id="api-pyramid-oereb-standard-create-tables"></span></span><dl class="function">
<dt id="pyramid_oereb.contrib.data_sources.create_tables.create_tables_from_standard_configuration">
<code class="descclassname">pyramid_oereb.contrib.data_sources.create_tables.</code><code class="descname">create_tables_from_standard_configuration</code><span class="sig-paren">(</span><em>configuration_yaml_path</em>, <em>section='pyramid_oereb'</em>, <em>c2ctemplate_style=False</em>, <em>tables_only=False</em>, <em>sql_file=None</em>, <em>if_not_exists=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid_oereb/contrib/data_sources/create_tables.html#create_tables_from_standard_configuration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_oereb.contrib.data_sources.create_tables.create_tables_from_standard_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates all schemas which are defined in the passed yaml file: &lt;section&gt;.&lt;plrs&gt;.[&lt;plr&gt;.&lt;code&gt;]. The code
must be camel case. It will be transformed to snake case and used as schema name.
Creates all tables inside the created schemas. This only affects the sqlalchemy models which are defined
with the Base class from pyramid_oereb.standard.models.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>configuration_yaml_path</strong> (<em>str</em>) &#8211; The absolute path to the yaml file which contains the plr
definitions.</li>
<li><strong>section</strong> (<em>str</em>) &#8211; The section in yaml file where the plrs are configured in. Default is &#8216;pyramid_oereb&#8217;.</li>
<li><strong>c2ctemplate_style</strong> (<em>bool</em>) &#8211; True if the yaml use a c2c template style (vars.[section]).
Default is False.</li>
<li><strong>tables_only</strong> (<em>bool</em>) &#8211; True to skip creation of schema. Default is False.</li>
<li><strong>sql_file</strong> (<a class="reference internal" href="../core/records.html#pyramid_oereb.core.records.documents.DocumentRecord.file" title="pyramid_oereb.core.records.documents.DocumentRecord.file"><em>file</em></a>) &#8211; the file to generate. Default is None (in the database).</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="module-pyramid_oereb.contrib.data_sources.standard.load_legend_entries"><span id="api-pyramid-oereb-standard-load-legend-entries"></span></span><dl class="function">
<dt id="pyramid_oereb.contrib.data_sources.standard.load_legend_entries.create_legend_entries_in_standard_db">
<code class="descclassname">pyramid_oereb.contrib.data_sources.standard.load_legend_entries.</code><code class="descname">create_legend_entries_in_standard_db</code><span class="sig-paren">(</span><em>config</em>, <em>topic_code</em>, <em>temp_creation_path='/tmp/pyconizer'</em>, <em>language='de'</em>, <em>section='pyramid_oereb'</em>, <em>c2ctemplate_style=False</em>, <em>image_format='image/png'</em>, <em>image_height=36</em>, <em>image_width=72</em>, <em>encoding=None</em>, <em>replace_host=None</em>, <em>replace_layer=None</em>, <em>string_keys=False</em>, <em>by_type_code=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid_oereb/contrib/data_sources/standard/load_legend_entries.html#create_legend_entries_in_standard_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_oereb.contrib.data_sources.standard.load_legend_entries.create_legend_entries_in_standard_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses the pyconizer core to create images out of the OEREB server configuration. It is creating symbols for
a dedicated topic. This function will clean all previously created icons from database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>config</strong> (<em>str</em>) &#8211; The path to the used OEREB server configuration YAML file.</li>
<li><strong>topic_code</strong> (<em>str</em>) &#8211; The topic code for which the symbols should be created. It must be configured in
the passed yml.</li>
<li><strong>temp_creation_path</strong> &#8211; The path where the images are created in.</li>
<li><strong>language</strong> &#8211; The language which is used to produce the WMS rules. This is a tricky part. You must
provide the language your WMS is using.</li>
<li><strong>section</strong> &#8211; The section which the config can be found in the yml.</li>
<li><strong>c2ctemplate_style</strong> (<em>bool</em>) &#8211; True if the yaml use a c2c template style (vars.[section]).
Default is False.</li>
<li><strong>image_format</strong> &#8211; The image format. This is passed throug to the WMS request. You need to provide a
format your WMS is supporting here.</li>
<li><strong>image_height</strong> &#8211; The height of the produced image.</li>
<li><strong>image_width</strong> &#8211; The width of the produced image.</li>
<li><strong>encoding</strong> (<em>str</em><em> or </em><em>unicode</em>) &#8211; The encoding which is used to encode the XML. Standard is None. This means
the encoding is taken from the XML content itself. Only use this parameter if your XML content
has no encoding set.</li>
<li><strong>replace_host</strong> (<em>str</em><em> or </em><em>None</em>) &#8211; The host which should be used instead of the one which is in the data.
This is only recommended on deploy process when your WMS might be already available on a DEV
instance but not on the production system which is linked in the data. Then you can create legend
entries by obtaining them from this DEV instance.</li>
<li><strong>replace_layer</strong> (<em>str</em><em> or </em><em>None</em>) &#8211; The layer which should be used instead of the one which is in the data.
This is only recommended on deploy process when your WMS might be already available on a DEV
instance serving a special legend layer but not on the production system which is linked in
the data. Then you can create legend entries by obtaining them from this DEV instances special
legend layer.</li>
<li><strong>string_keys</strong> (<em>bool</em>) &#8211; Switch for setting primary key for legend entries whether to string or integer</li>
<li><strong>by_type_code</strong> (<em>bool</em>) &#8211; If set the process will use the type_code instead of name for obtaining the
legend icons. This needs a WMS layer to be configured with the type_code in its name property. It
prevents the legend entry creation process to be broken for case sensitive class names in
MAPSERVER. Because the &#8220;RULE&#8221; parameter of the GetLegendGraphics request on MAPSERVER seems to be
case insensitive.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="functions-used-as-configurable-hooks">
<h2>Functions used as configurable hooks<a class="headerlink" href="#functions-used-as-configurable-hooks" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-pyramid_oereb.contrib.data_sources.standard.hook_methods"><span id="api-pyramid-oereb-standard-hook-methods"></span></span><dl class="function">
<dt id="pyramid_oereb.contrib.data_sources.standard.hook_methods.get_symbol">
<code class="descclassname">pyramid_oereb.contrib.data_sources.standard.hook_methods.</code><code class="descname">get_symbol</code><span class="sig-paren">(</span><em>params</em>, <em>theme_config</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid_oereb/contrib/data_sources/standard/hook_methods.html#get_symbol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_oereb.contrib.data_sources.standard.hook_methods.get_symbol" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the symbol for the requested theme and type code from database. It queries the model
for the legend entry pyramid_oereb.contrib.data_sources.standard.models.get_legend_entry</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>params</strong> (<em>dict</em>) &#8211; The URL parameters which were handed over via request.</li>
<li><strong>theme_config</strong> (<em>dict</em>) &#8211; The configuration of the theme how it was set up in the YAML.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The image content and the mimetype of image.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">bytearray, str</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">HTTPNotFound</span></code></li>
<li><code class="xref py py-exc docutils literal"><span class="pre">HTTPServerError</span></code></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="sources.html" class="btn btn-neutral float-right" title="Sources" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../changes.html" class="btn btn-neutral float-left" title="Changes/Hints for migration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2017-2022, openoereb community.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>