

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Standard &mdash; pyramid_oereb  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'',
              LANGUAGE:'en',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Sources" href="sources.html" />
    <link rel="prev" title="Changes/Hints for migration" href="../changes.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> pyramid_oereb
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">Changes/Hints for migration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Standard</a><ul>
<li class="toctree-l2"><a class="reference internal" href="sources.html">Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="models/index.html">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="#functions-for-creating-standard-environment">Functions for creating standard environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#functions-used-as-configurable-hooks">Functions used as configurable hooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contrib/index.html">Contribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/index.html">Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pyramid_oereb</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Standard</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="standard">
<h1>Standard<a class="headerlink" href="#standard" title="Permalink to this headline">¶</a></h1>
<p>The standard package is the part where all the database configuration is stored. It also provides really
useful functions to integrate data, as well as creation of a YAML-configuration fitting this standard
structure. In addition you will find here the hook methods which are used in several places in the
configuration and an example usage of the pyconizer package to provide legend entry icons for a dedicated
layer.</p>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="functions-for-creating-standard-environment">
<h2>Functions for creating standard environment<a class="headerlink" href="#functions-for-creating-standard-environment" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-pyramid_oereb.contrib.data_sources.create_tables"><span id="api-pyramid-oereb-standard-create-tables"></span></span><dl class="function">
<dt id="pyramid_oereb.contrib.data_sources.create_tables.create_tables_from_standard_configuration">
<code class="descclassname">pyramid_oereb.contrib.data_sources.create_tables.</code><code class="descname">create_tables_from_standard_configuration</code><span class="sig-paren">(</span><em>configuration_yaml_path</em>, <em>section='pyramid_oereb'</em>, <em>c2ctemplate_style=False</em>, <em>tables_only=False</em>, <em>sql_file=None</em>, <em>if_not_exists=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid_oereb/contrib/data_sources/create_tables.html#create_tables_from_standard_configuration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_oereb.contrib.data_sources.create_tables.create_tables_from_standard_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates all schemas which are defined in the passed yaml file: &lt;section&gt;.&lt;plrs&gt;.[&lt;plr&gt;.&lt;code&gt;]. The code
must be camel case. It will be transformed to snake case and used as schema name.
Creates all tables inside the created schemas. This only affects the sqlalchemy models which are defined
with the Base class from pyramid_oereb.standard.models.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>configuration_yaml_path</strong> (<em>str</em>) &#8211; The absolute path to the yaml file which contains the plr
definitions.</li>
<li><strong>section</strong> (<em>str</em>) &#8211; The section in yaml file where the plrs are configured in. Default is &#8216;pyramid_oereb&#8217;.</li>
<li><strong>c2ctemplate_style</strong> (<em>bool</em>) &#8211; True if the yaml use a c2c template style (vars.[section]).
Default is False.</li>
<li><strong>tables_only</strong> (<em>bool</em>) &#8211; True to skip creation of schema. Default is False.</li>
<li><strong>sql_file</strong> (<a class="reference internal" href="../core/records.html#pyramid_oereb.core.records.documents.DocumentRecord.file" title="pyramid_oereb.core.records.documents.DocumentRecord.file"><em>file</em></a>) &#8211; the file to generate. Default is None (in the database).</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="module-pyramid_oereb.contrib.data_sources.standard.load_legend_entries"><span id="api-pyramid-oereb-standard-load-legend-entries"></span></span><dl class="function">
<dt id="pyramid_oereb.contrib.data_sources.standard.load_legend_entries.create_legend_entries_in_standard_db">
<code class="descclassname">pyramid_oereb.contrib.data_sources.standard.load_legend_entries.</code><code class="descname">create_legend_entries_in_standard_db</code><span class="sig-paren">(</span><em>config</em>, <em>topic_code</em>, <em>temp_creation_path='/tmp/pyconizer'</em>, <em>language='de'</em>, <em>section='pyramid_oereb'</em>, <em>c2ctemplate_style=False</em>, <em>image_format='image/png'</em>, <em>image_height=36</em>, <em>image_width=72</em>, <em>encoding=None</em>, <em>replace_host=None</em>, <em>replace_layer=None</em>, <em>string_keys=False</em>, <em>by_type_code=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid_oereb/contrib/data_sources/standard/load_legend_entries.html#create_legend_entries_in_standard_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_oereb.contrib.data_sources.standard.load_legend_entries.create_legend_entries_in_standard_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses the pyconizer core to create images out of the OEREB server configuration. It is creating symbols for
a dedicated topic. This function will clean all previously created icons from database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>config</strong> (<em>str</em>) &#8211; The path to the used OEREB server configuration YAML file.</li>
<li><strong>topic_code</strong> (<em>str</em>) &#8211; The topic code for which the symbols should be created. It must be configured in
the passed yml.</li>
<li><strong>temp_creation_path</strong> &#8211; The path where the images are created in.</li>
<li><strong>language</strong> &#8211; The language which is used to produce the WMS rules. This is a tricky part. You must
provide the language your WMS is using.</li>
<li><strong>section</strong> &#8211; The section which the config can be found in the yml.</li>
<li><strong>c2ctemplate_style</strong> (<em>bool</em>) &#8211; True if the yaml use a c2c template style (vars.[section]).
Default is False.</li>
<li><strong>image_format</strong> &#8211; The image format. This is passed throug to the WMS request. You need to provide a
format your WMS is supporting here.</li>
<li><strong>image_height</strong> &#8211; The height of the produced image.</li>
<li><strong>image_width</strong> &#8211; The width of the produced image.</li>
<li><strong>encoding</strong> (<em>str</em><em> or </em><em>unicode</em>) &#8211; The encoding which is used to encode the XML. Standard is None. This means
the encoding is taken from the XML content itself. Only use this parameter if your XML content
has no encoding set.</li>
<li><strong>replace_host</strong> (<em>str</em><em> or </em><em>None</em>) &#8211; The host which should be used instead of the one which is in the data.
This is only recommended on deploy process when your WMS might be already available on a DEV
instance but not on the production system which is linked in the data. Then you can create legend
entries by obtaining them from this DEV instance.</li>
<li><strong>replace_layer</strong> (<em>str</em><em> or </em><em>None</em>) &#8211; The layer which should be used instead of the one which is in the data.
This is only recommended on deploy process when your WMS might be already available on a DEV
instance serving a special legend layer but not on the production system which is linked in
the data. Then you can create legend entries by obtaining them from this DEV instances special
legend layer.</li>
<li><strong>string_keys</strong> (<em>bool</em>) &#8211; Switch for setting primary key for legend entries whether to string or integer</li>
<li><strong>by_type_code</strong> (<em>bool</em>) &#8211; If set the process will use the type_code instead of name for obtaining the
legend icons. This needs a WMS layer to be configured with the type_code in its name property. It
prevents the legend entry creation process to be broken for case sensitive class names in
MAPSERVER. Because the &#8220;RULE&#8221; parameter of the GetLegendGraphics request on MAPSERVER seems to be
case insensitive.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="functions-used-as-configurable-hooks">
<h2>Functions used as configurable hooks<a class="headerlink" href="#functions-used-as-configurable-hooks" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-pyramid_oereb.contrib.data_sources.standard.hook_methods"><span id="api-pyramid-oereb-standard-hook-methods"></span></span><dl class="function">
<dt id="pyramid_oereb.contrib.data_sources.standard.hook_methods.get_surveying_data_provider">
<code class="descclassname">pyramid_oereb.contrib.data_sources.standard.hook_methods.</code><code class="descname">get_surveying_data_provider</code><span class="sig-paren">(</span><em>real_estate</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid_oereb/contrib/data_sources/standard/hook_methods.html#get_surveying_data_provider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_oereb.contrib.data_sources.standard.hook_methods.get_surveying_data_provider" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>real_estate</strong> (<em>pyramid_oereb.lib.records.real_estate.RealEstateRecord</em>) &#8211; The real estate for which the
provider of the surveying data should be delivered.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>The provider who produced the used</dt>
<dd>surveying data.</dd>
</dl>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">provider (<a class="reference internal" href="../core/records.html#pyramid_oereb.core.records.office.OfficeRecord" title="pyramid_oereb.core.records.office.OfficeRecord">pyramid_oereb.core.records.office.OfficeRecord</a>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyramid_oereb.contrib.data_sources.standard.hook_methods.get_surveying_data_update_date">
<code class="descclassname">pyramid_oereb.contrib.data_sources.standard.hook_methods.</code><code class="descname">get_surveying_data_update_date</code><span class="sig-paren">(</span><em>real_estate</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid_oereb/contrib/data_sources/standard/hook_methods.html#get_surveying_data_update_date"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_oereb.contrib.data_sources.standard.hook_methods.get_surveying_data_update_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the date of the latest update of the used survey data data for the
situation map. The method you find here is only matching the standard configuration. But you can provide
your own one if your configuration is different. The only thing you need to take into account is that the
input of this method is always and only a real estate record. And the output of this method must be a
datetime.date object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>real_estate</strong> (<em>pyramid_oereb.lib.records.real_estate.RealEstateRecord</em>) &#8211; The real
estate for which the last update date of the base data should be indicated</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The date of the last update of the cadastral base data</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">update_date (datetime.datetime)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyramid_oereb.contrib.data_sources.standard.hook_methods.get_symbol">
<code class="descclassname">pyramid_oereb.contrib.data_sources.standard.hook_methods.</code><code class="descname">get_symbol</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid_oereb/contrib/data_sources/standard/hook_methods.html#get_symbol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_oereb.contrib.data_sources.standard.hook_methods.get_symbol" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the symbol for the requested theme and type code from database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>request</strong> (<em>pyramid.request.Request</em>) &#8211; The request containing the codes as matchdict parameters.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The generated response object.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">pyramid.response.Response</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyramid_oereb.contrib.data_sources.standard.hook_methods.get_symbol_ref">
<code class="descclassname">pyramid_oereb.contrib.data_sources.standard.hook_methods.</code><code class="descname">get_symbol_ref</code><span class="sig-paren">(</span><em>request</em>, <em>record</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid_oereb/contrib/data_sources/standard/hook_methods.html#get_symbol_ref"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_oereb.contrib.data_sources.standard.hook_methods.get_symbol_ref" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the link to the symbol of the specified public law restriction.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>request</strong> (<em>pyramid.request.Request</em>) &#8211; The current request instance.</li>
<li><strong>(</strong><strong>pyramid_oereb.core.records.plr.PlrRecord or</strong> (<em>record</em>) &#8211; pyramid_oereb.core.records.view_service.LegendEntryRecord): The record of the public law
restriction to get the symbol reference for.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The link to the symbol for the specified public law restriction.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">uri</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyramid_oereb.contrib.data_sources.standard.hook_methods.plr_sort_within_themes">
<code class="descclassname">pyramid_oereb.contrib.data_sources.standard.hook_methods.</code><code class="descname">plr_sort_within_themes</code><span class="sig-paren">(</span><em>extract</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid_oereb/contrib/data_sources/standard/hook_methods.html#plr_sort_within_themes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_oereb.contrib.data_sources.standard.hook_methods.plr_sort_within_themes" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the standard hook method to sort a plr list (while respecting the theme order).
This standard hook does no sorting, you can set your configuration to a different method if you need a
specific sorting.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>extract</strong> (<em>pyramid_oereb.lib.records.extract.ExtractRecord</em>) &#8211; The unsorted extract</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Returns the updated extract</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">pyramid_oereb.lib.records.extract.ExtractRecord</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyramid_oereb.contrib.data_sources.standard.hook_methods.produce_sld_content">
<code class="descclassname">pyramid_oereb.contrib.data_sources.standard.hook_methods.</code><code class="descname">produce_sld_content</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyramid_oereb/contrib/data_sources/standard/hook_methods.html#produce_sld_content"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_oereb.contrib.data_sources.standard.hook_methods.produce_sld_content" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the standard hook method to provide the sld content. Of course you can set it to another one. For
instance to use another template. Or to use other parameters to provide the correctly constructed SLD.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">What to know about this Method: REQUEST-Method: GET, parameters only as url parameters</p>
</div>
<p>When you are replacing this method take care that it has to accept a pyramid request as input and must
deliver a valid SLD wrapped in a pyramid response instance as output. It is in your responsibility.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>request</strong> (<em>pyramid.request.Request</em>) &#8211; The request from the pyramid application.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">pyramid.response.Response</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="sources.html" class="btn btn-neutral float-right" title="Sources" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../changes.html" class="btn btn-neutral float-left" title="Changes/Hints for migration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2017-2022, openoereb community.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>