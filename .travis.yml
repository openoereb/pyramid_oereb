sudo: required
language: python
python:
  - "2.7"

services:
  - docker

# command to install dependencies
install:
  - make install

before_install:
  - docker pull mdillon/postgis

# command to run tests
script:
  - make git-attributes
  - make lint
  - make tests-docker-setup-db
  - make tests

before_deploy:
  - sudo apt-get install pandoc
  - make description

# deploy to pypi
deploy:
  provider: pypi
  user: kdeininger
  password:
    secure: E911mI4SZKiboB/zuEG6LuCpKLFXhCy3hduq+g5j4Ea/HPm+SpjwvKmOQ9LYASy5m9GwFQwksAj4Jjc1GgLgNtM0AWDDlnONNInrdUk/rrM0WHbPH1BcADAMkIffXnpRxttpAzuCkId5F9O6FYIJHLB4FrQdy4rSRBpJaH9PPxf3lQb3vua6HWuQW/qkDrEGYvfBJBa9h/VxA/Xk+MW8WPJTHEOwCZiaC25+3xeXjJ34NF9TmzPkz0IHZECjl0mX0ynADnYsC3x8k2WcLYUNZXb/CFHIlxpCXxXnORvCuN+SGjTf7LRCQAqi/2RD1WkPYwIqau87zyM9vYD0KLWGns05gLN90yQB62ojVYA81w/MsZ/ovvZEZaP03HoyTvp6MbHB1axnjFVZ2OOqwCGRZY4xiOOG5v5sUpxKoUGWLSNOOOZXPHX83O72+1eUUj2RRSFeamJzj8qBHi3kMgaq+ffyClpH4C0ZU9eBZevv18DTvJXDXMx/U+19wFrPwpskc2qDfwXYLK+scORrDhMHi2Tuk3wprXdOnWkPEY3TxTBbsa4SlthXjCfeLxCPpAU99ehU6OtHX3WDBiEpsp4FwWYXiL8Pme5lWFVf8bwHkDtTYlMLcy6YdA5133AF4nxGRdbQ635K+i2d5OiGvOC8ahdf3TVXtPJshxYOQmmXpoA=
  on:
    tags: true
    repo: camptocamp/pyramid_oereb
  distributions: sdist bdist_wheel

# configure notifications
notifications:
  email: false
